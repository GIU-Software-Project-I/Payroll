{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/mano/Desktop/payroll/Payroll/frontend/app/dashboard/department-employee/organization/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport { organizationStructureService } from '@/app/services/organization-structure';\n\n/**\n * Organization Structure Page - Department Employee\n * REQ-SANV-01: View organizational hierarchy\n * BR 24: Organizational structure must be viewable as a graphical chart\n */\nexport default function OrganizationPage() {\n  const [orgChart, setOrgChart] = useState<any>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [expandedDepts, setExpandedDepts] = useState<Set<string>>(new Set());\n\n  useEffect(() => {\n    const fetchStructure = async () => {\n      try {\n        setLoading(true);\n        const data = await organizationStructureService.getOrgChart();\n        setOrgChart(data);\n      } catch (err: any) {\n        setError(err.message || 'Failed to load organization structure');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchStructure();\n  }, []);\n\n  const toggleDepartment = (deptId: string) => {\n    setExpandedDepts(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(deptId)) {\n        newSet.delete(deptId);\n      } else {\n        newSet.add(deptId);\n      }\n      return newSet;\n    });\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-96\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4\"></div>\n          <p className=\"text-slate-600\">Loading organization structure...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"bg-red-50 border border-red-200 rounded-lg p-6\">\n        <p className=\"text-red-800 font-medium\">Error loading structure</p>\n        <p className=\"text-red-700 text-sm mt-2\">{error}</p>\n      </div>\n    );\n  }\n\n  if (!orgChart) {\n    return (\n      <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-6\">\n        <p className=\"text-yellow-800 font-medium\">No organization data available</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div>\n        <h1 className=\"text-3xl font-bold text-slate-900\">Organization Structure</h1>\n        <p className=\"text-slate-600 mt-2\">View company departments, reporting lines, and organizational hierarchy</p>\n      </div>\n\n      {/* Company Overview */}\n      <div className=\"bg-gradient-to-r from-green-600 to-green-700 rounded-lg p-8 text-white\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h2 className=\"text-3xl font-bold\">{orgChart.companyName || 'Organization'}</h2>\n            <p className=\"text-green-100 mt-2\">Organization Structure</p>\n          </div>\n          <div className=\"text-6xl\">üè¢</div>\n        </div>\n      </div>\n\n      {/* Organization Tree */}\n      <div className=\"space-y-4\">\n        <div className=\"bg-white rounded-lg border border-slate-200 shadow-sm p-6\">\n          <h2 className=\"text-2xl font-bold text-slate-900 mb-6\">Departments</h2>\n\n          {orgChart.departments && orgChart.departments.length > 0 ? (\n            <div className=\"space-y-3\">\n              {orgChart.departments.map((dept: any) => (\n                <div key={dept.id} className=\"border border-slate-200 rounded-lg\">\n                  {/* Department Header */}\n                  <button\n                    onClick={() => toggleDepartment(dept.id)}\n                    className=\"w-full px-6 py-4 hover:bg-slate-50 transition-colors flex items-center justify-between\"\n                  >\n                    <div className=\"flex items-center gap-4 flex-1 text-left\">\n                      <div className=\"text-2xl\">\n                        {expandedDepts.has(dept.id) ? '‚ñº' : '‚ñ∂'}\n                      </div>\n                      <div>\n                        <h3 className=\"font-bold text-slate-900 text-lg\">{dept.name}</h3>\n                        {dept.head && (\n                          <p className=\"text-slate-600 text-sm\">\n                            Head: <span className=\"font-medium\">{dept.head.name || 'N/A'}</span> ‚Ä¢\n                            <span className=\"ml-2\">{dept.employeeCount || 0} employees</span>\n                          </p>\n                        )}\n                      </div>\n                    </div>\n                    <div className=\"text-slate-500\">üìä</div>\n                  </button>\n\n                  {/* Sub-departments */}\n                  {expandedDepts.has(dept.id) && dept.subDepartments && dept.subDepartments.length > 0 && (\n                    <div className=\"border-t border-slate-200 bg-slate-50 px-6 py-4\">\n                      <div className=\"space-y-3 ml-6\">\n                        <p className=\"text-sm font-medium text-slate-700 mb-4\">Teams within {dept.name}</p>\n                        {dept.subDepartments.map((subDept: any) => (\n                          <div key={subDept.id} className=\"bg-white p-4 rounded-lg border border-slate-200 hover:border-green-300 transition-colors\">\n                            <div className=\"flex items-center justify-between\">\n                              <div>\n                                <h4 className=\"font-semibold text-slate-900\">{subDept.name}</h4>\n                                {subDept.head && (\n                                  <p className=\"text-slate-600 text-sm\">\n                                    Team Lead: <span className=\"font-medium\">{subDept.head.name || 'N/A'}</span>\n                                  </p>\n                                )}\n                              </div>\n                              <div className=\"text-right\">\n                                <p className=\"text-lg font-bold text-slate-900\">{subDept.employeeCount || 0}</p>\n                                <p className=\"text-xs text-slate-600\">team members</p>\n                              </div>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n          ) : (\n            <p className=\"text-slate-600\">No departments available</p>\n          )}\n        </div>\n      </div>\n\n      {/* Information Box */}\n      <div className=\"bg-green-50 border border-green-200 rounded-lg p-6\">\n        <h3 className=\"font-semibold text-green-900 mb-2\">üìã Organization Information</h3>\n        <ul className=\"text-green-800 text-sm space-y-2\">\n          <li>‚Ä¢ View the complete organizational structure and reporting lines</li>\n          <li>‚Ä¢ Find contact information for team members and departments</li>\n          <li>‚Ä¢ Understand your position within the organization</li>\n          <li>‚Ä¢ See team compositions and department hierarchies</li>\n        </ul>\n      </div>\n\n      {/* Actions */}\n      <div className=\"flex gap-4\">\n        <Link href=\"/dashboard/department-employee\">\n          <button className=\"px-6 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors font-medium\">\n            Back to Dashboard\n          </button>\n        </Link>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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"}}]
}