### ===========================================
### EMPLOYEE PROFILE MODULE - HTTP TESTS
### ===========================================
### Base URL: http://localhost:5000/employee-profile
### ===========================================


### -------------------------------------------
### SELF-SERVICE ENDPOINTS (1-6)
### -------------------------------------------

### 1. GET My Profile
GET http://localhost:5000/employee-profile/me?userId=693a80047e07119e5fd6a8d9

### 2. PATCH Update Contact Info
PATCH http://localhost:5000/employee-profile/me/contact-info?userId={{employeeId}}
Content-Type: application/json

{
  "mobilePhone": "+1234567890",
  "homePhone": "+0987654321",
  "personalEmail": "john.personal@example.com",
  "address": {
    "city": "New York",
    "streetAddress": "123 Main St",
    "country": "USA"
  }
}

### 3. PATCH Update Bio
PATCH http://localhost:5000/employee-profile/me/bio?userId={{employeeId}}
Content-Type: application/json

{
  "biography": "Senior Software Engineer with 10 years of experience.",
  "profilePictureUrl": "https://example.com/photo.jpg"
}

### 4. POST Create Correction Request
POST http://localhost:5000/employee-profile/me/correction-request?userId={{employeeId}}
Content-Type: application/json

{
  "requestDescription": "Please update my job title to Senior Developer",
  "reason": "Promoted last month"
}

### 5. GET My Correction Requests
GET http://localhost:5000/employee-profile/me/correction-requests?userId={{employeeId}}&page=1&limit=10

### 6. PATCH Cancel My Correction Request
PATCH http://localhost:5000/employee-profile/me/correction-requests/{{requestId}}/cancel?userId={{employeeId}}


### -------------------------------------------
### MANAGER ENDPOINTS (7-8)
### -------------------------------------------

### 7. GET Team Profiles
GET http://localhost:5000/employee-profile/team?userId={{managerId}}

### 8. GET Team Profiles Paginated
GET http://localhost:5000/employee-profile/team/paginated?userId={{managerId}}&page=1&limit=10


### -------------------------------------------
### HR ADMIN ENDPOINTS (9-20)
### -------------------------------------------

### 9. GET All Employees
GET http://localhost:5000/employee-profile/admin/employees?page=1&limit=20

### 10. GET All Employees with Filters
GET http://localhost:5000/employee-profile/admin/employees?status=ACTIVE&departmentId={{departmentId}}&page=1&limit=10

### 11. GET Search Employees
GET http://localhost:5000/employee-profile/admin/search?query=John&page=1&limit=10

### 12. GET All Change Requests
GET http://localhost:5000/employee-profile/admin/change-requests?page=1&limit=10

### 13. GET Change Requests by Status
GET http://localhost:5000/employee-profile/admin/change-requests?status=PENDING&page=1&limit=10

### 14. GET Pending Change Requests Count
GET http://localhost:5000/employee-profile/admin/change-requests/count/pending

### 15. GET Single Change Request
GET http://localhost:5000/employee-profile/admin/change-requests/{{requestId}}

### 16. PATCH Approve Change Request
PATCH http://localhost:5000/employee-profile/admin/change-requests/{{requestId}}/process
Content-Type: application/json

{
  "status": "APPROVED"
}

### 17. PATCH Reject Change Request
PATCH http://localhost:5000/employee-profile/admin/change-requests/{{requestId}}/process
Content-Type: application/json

{
  "status": "REJECTED",
  "rejectionReason": "Insufficient documentation provided"
}

### 18. GET Employee Count by Status
GET http://localhost:5000/employee-profile/admin/stats/by-status

### 19. GET Employee Count by Department
GET http://localhost:5000/employee-profile/admin/stats/by-department

### 20. GET Single Employee Profile (Admin)
GET http://localhost:5000/employee-profile/{{employeeId}}

### 21. PATCH Update Employee Profile (Admin)
PATCH http://localhost:5000/employee-profile/{{employeeId}}
Content-Type: application/json

{
  "firstName": "John",
  "lastName": "Doe",
  "gender": "MALE",
  "maritalStatus": "MARRIED",
  "status": "ACTIVE",
  "contractType": "FULL_TIME_CONTRACT",
  "workType": "FULL_TIME",
  "workEmail": "john.doe@company.com"
}

### 22. PATCH Deactivate Employee
PATCH http://localhost:5000/employee-profile/{{employeeId}}/deactivate

### 23. PATCH Assign Role
PATCH http://localhost:5000/employee-profile/{{employeeId}}/role
Content-Type: application/json

{
  "accessProfileId": "{{roleId}}"
}


### ===========================================
### EDGE CASE TESTS (24-40)
### ===========================================

### 24. ERROR: Get Profile - Invalid ObjectId
GET http://localhost:5000/employee-profile/me?userId=invalid-id

### 25. ERROR: Get Profile - Not Found
GET http://localhost:5000/employee-profile/me?userId=507f1f77bcf86cd799439011

### 26. ERROR: Update Contact Info - Terminated Employee
PATCH http://localhost:5000/employee-profile/me/contact-info?userId={{terminatedEmployeeId}}
Content-Type: application/json

{
  "mobilePhone": "+1234567890"
}

### 27. ERROR: Update Bio - Terminated Employee
PATCH http://localhost:5000/employee-profile/me/bio?userId={{terminatedEmployeeId}}
Content-Type: application/json

{
  "biography": "Test"
}

### 28. ERROR: Create Correction Request - Terminated Employee
POST http://localhost:5000/employee-profile/me/correction-request?userId={{terminatedEmployeeId}}
Content-Type: application/json

{
  "requestDescription": "Test request",
  "reason": "Test"
}

### 29. ERROR: Create Correction Request - Duplicate Pending
POST http://localhost:5000/employee-profile/me/correction-request?userId={{employeeWithPendingRequest}}
Content-Type: application/json

{
  "requestDescription": "Another request",
  "reason": "Should fail - already has pending"
}

### 30. ERROR: Cancel Request - Not Owner
PATCH http://localhost:5000/employee-profile/me/correction-requests/{{requestId}}/cancel?userId={{otherEmployeeId}}

### 31. ERROR: Cancel Request - Already Processed
PATCH http://localhost:5000/employee-profile/me/correction-requests/{{approvedRequestId}}/cancel?userId={{employeeId}}

### 32. ERROR: Cancel Request - Not Found
PATCH http://localhost:5000/employee-profile/me/correction-requests/REQ-NOTFOUND/cancel?userId={{employeeId}}

### 33. ERROR: Process Request - Already Processed
PATCH http://localhost:5000/employee-profile/admin/change-requests/{{approvedRequestId}}/process
Content-Type: application/json

{
  "status": "APPROVED"
}

### 34. ERROR: Reject Request - Missing Reason
PATCH http://localhost:5000/employee-profile/admin/change-requests/{{requestId}}/process
Content-Type: application/json

{
  "status": "REJECTED"
}

### 35. ERROR: Admin Update - Invalid Status Transition (TERMINATED to ACTIVE)
PATCH http://localhost:5000/employee-profile/{{terminatedEmployeeId}}
Content-Type: application/json

{
  "status": "ACTIVE"
}

### 36. ERROR: Admin Update - Duplicate National ID
PATCH http://localhost:5000/employee-profile/{{employeeId}}
Content-Type: application/json

{
  "nationalId": "{{existingNationalId}}"
}

### 37. ERROR: Admin Update - Duplicate Work Email
PATCH http://localhost:5000/employee-profile/{{employeeId}}
Content-Type: application/json

{
  "workEmail": "{{existingWorkEmail}}"
}

### 38. ERROR: Deactivate - Already Terminated
PATCH http://localhost:5000/employee-profile/{{terminatedEmployeeId}}/deactivate

### 39. ERROR: Assign Role - Terminated Employee
PATCH http://localhost:5000/employee-profile/{{terminatedEmployeeId}}/role
Content-Type: application/json

{
  "accessProfileId": "{{roleId}}"
}

### 40. ERROR: Assign Role - Inactive Role
PATCH http://localhost:5000/employee-profile/{{employeeId}}/role
Content-Type: application/json

{
  "accessProfileId": "{{inactiveRoleId}}"
}

### 41. ERROR: Assign Role - Role Not Found
PATCH http://localhost:5000/employee-profile/{{employeeId}}/role
Content-Type: application/json

{
  "accessProfileId": "507f1f77bcf86cd799439011"
}


### ===========================================
### END OF TESTS
### ===========================================

