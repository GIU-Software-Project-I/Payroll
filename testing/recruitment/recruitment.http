### Recruitment Module HTTP Tests
@baseUrl = http://localhost:4000/recruitment
@hiringManagerId = 693a80037e07119e5fd6a896
@hrId = 693a80037e07119e5fd6a896
@jobTemplateId = 693a80037e07119e5fd6a89d
@jobRequisitionId = 693a80037e07119e5fd6a8a3
@candidateId = 693a80037e07119e5fd6a896
@applicationId = 693a80037e07119e5fd6a8a9
@interviewId = 693a80047e07119e5fd6a8bb
@offerId = 693a80047e07119e5fd6a8cd
@panelistId = 693a80037e07119e5fd6a897

# ==========================================
# 1. Job Templates
# ==========================================

### Create Job Template
POST {{baseUrl}}/job-templates
Content-Type: application/json

{
    "title": "Software Engineer II",
    "description": "Develops software solutions.",
    "requirements": ["Node.js", "TypeScript", "3+ years exp"],
    "department": "Engineering"
}

### Get All Job Templates
GET {{baseUrl}}/job-templates

### Get Job Template by ID
GET {{baseUrl}}/job-templates/{{jobTemplateId}}

### Update Job Template
PUT {{baseUrl}}/job-templates/{{jobTemplateId}}
Content-Type: application/json

{
    "title": "Software Engineer II - Updated",
    "requirements": ["Node.js", "TypeScript", "NestJS", "4+ years exp"]
}

### Delete Job Template
DELETE {{baseUrl}}/job-templates/{{jobTemplateId}}

# ==========================================
# 2. Job Requisitions (REC-004, REC-009, REC-023)
# ==========================================

### Create Job Requisition
POST {{baseUrl}}/job-requisitions
Content-Type: application/json

{
    "jobTitle": "Senior Backend Engineer",
    "jobDescription": "Lead backend development initiatives.",
    "department": "Engineering",
    "hiringManagerId": "{{hiringManagerId}}",
    "openings": 2,
    "location": "New York, NY"
}

### Get All Job Requisitions (Filtered)
GET {{baseUrl}}/job-requisitions?status=published&managerId={{hiringManagerId}}

### Get Published Jobs (Careers Page)
GET {{baseUrl}}/job-requisitions/published

### Get Job Requisition by ID
GET {{baseUrl}}/job-requisitions/{{jobRequisitionId}}

### Get Requisition Progress
GET {{baseUrl}}/job-requisitions/{{jobRequisitionId}}/progress

### Update Job Requisition
PUT {{baseUrl}}/job-requisitions/{{jobRequisitionId}}
Content-Type: application/json

{
    "openings": 3
}

### Publish Job Requisition
PATCH {{baseUrl}}/job-requisitions/{{jobRequisitionId}}/publish
Content-Type: application/json

{
    "status": "published",
    "postingDate": "2025-12-15"
}

### Close Job Requisition
PATCH {{baseUrl}}/job-requisitions/{{jobRequisitionId}}/close

# ==========================================
# 3. Applications (REC-007, REC-008, REC-017, REC-022, REC-028)
# ==========================================

### Submit Application
POST {{baseUrl}}/applications
Content-Type: application/json

{
    "candidateId": "{{candidateId}}",
    "requisitionId": "{{jobRequisitionId}}",
    "resumeUrl": "http://example.com/resume.pdf",
    "consent": true
}

### Get All Applications (Filtered)
GET {{baseUrl}}/applications?requisitionId={{jobRequisitionId}}&status=in_process

### Get Application by ID
GET {{baseUrl}}/applications/{{applicationId}}

### Get Application History
GET {{baseUrl}}/applications/{{applicationId}}/history

### Get Applications by Candidate
GET {{baseUrl}}/candidates/{{candidateId}}/applications

### Assign HR to Application
PATCH {{baseUrl}}/applications/{{applicationId}}/assign-hr
Content-Type: application/json

{
    "hrId": "{{hrId}}"
}

### Update Application Stage
PATCH {{baseUrl}}/applications/{{applicationId}}/stage
Content-Type: application/json

{
    "stage": "interview"
}

### Update Application Status
PATCH {{baseUrl}}/applications/{{applicationId}}/status
Content-Type: application/json

{
    "status": "in_process"
}

### Reject Application
PATCH {{baseUrl}}/applications/{{applicationId}}/reject
Content-Type: application/json

{
    "reason": "Does not meet technical requirements"
}

# ==========================================
# 4. Dashboard & Referrals (REC-009, REC-030)
# ==========================================

### Get Recruitment Dashboard
GET {{baseUrl}}/dashboard

### Create Referral
POST {{baseUrl}}/referrals
Content-Type: application/json

{
    "candidateId": "{{candidateId}}",
    "referredBy": "{{hiringManagerId}}",
    "notes": "Great fit for the team"
}

### Get All Referrals
GET {{baseUrl}}/referrals

### Get Referral by Candidate
GET {{baseUrl}}/referrals/candidate/{{candidateId}}

### Check if Referral
GET {{baseUrl}}/referrals/check/{{candidateId}}


# ==========================================
# 5. Interviews & Feedback (REC-010, REC-011, REC-020, REC-021)
# ==========================================

### Schedule Interview
POST {{baseUrl}}/interviews
Content-Type: application/json

{
    "applicationId": "{{applicationId}}",
    "interviewDate": "2025-12-25T14:00:00Z",
    "interviewers": ["{{hiringManagerId}}"],
    "type": "Technical",
    "location": "Zoom"
}

### Get Upcoming Interviews
GET {{baseUrl}}/interviews?days=14

### Get Interview by ID
GET {{baseUrl}}/interviews/{{interviewId}}

### Get Interviews by Application
GET {{baseUrl}}/interviews/application/{{applicationId}}

### Get Interviews by Panelist
GET {{baseUrl}}/interviews/panelist/{{panelistId}}

### Update Interview
PUT {{baseUrl}}/interviews/{{interviewId}}
Content-Type: application/json

{
    "interviewDate": "2025-12-26T14:00:00Z"
}

### Complete Interview
PATCH {{baseUrl}}/interviews/{{interviewId}}/complete

### Cancel Interview
PATCH {{baseUrl}}/interviews/{{interviewId}}/cancel
Content-Type: application/json

{
    "reason": "Scheduling conflict"
}

### Submit Interview Feedback
POST {{baseUrl}}/feedback
Content-Type: application/json

{
    "interviewId": "{{interviewId}}",
    "score": 9,
    "comments": "Excellent technical skills.",
    "interviewerId": "{{hiringManagerId}}"
}

### Get Feedback by Interview
GET {{baseUrl}}/feedback/interview/{{interviewId}}

### Get Feedback by Application
GET {{baseUrl}}/feedback/application/{{applicationId}}

### Get Average Application Score
GET {{baseUrl}}/feedback/application/{{applicationId}}/average-score

# ==========================================
# 6. Offers (REC-014, REC-018)
# ==========================================

### Create Offer
POST {{baseUrl}}/offers
Content-Type: application/json

{
    "applicationId": "{{applicationId}}",
    "candidateId": "{{candidateId}}",
    "grossSalary": 120000,
    "role": "Senior Engineer",
    "startDate": "2026-02-01",
    "benefits": ["Health", "Dental", "401k"]
}

### Get Pending Offers
GET {{baseUrl}}/offers

### Get Offer by ID
GET {{baseUrl}}/offers/{{offerId}}

### Get Offer by Application
GET {{baseUrl}}/offers/application/{{applicationId}}

### Approve Offer
PATCH {{baseUrl}}/offers/{{offerId}}/approve
Content-Type: application/json

{
    "status": "approved",
    "approverId": "{{hiringManagerId}}"
}

### Record Candidate Response (Accept)
PATCH {{baseUrl}}/offers/{{offerId}}/candidate-response
Content-Type: application/json

{
    "response": "accepted",
    "signedContractUrl": "http://example.com/signed_contract.pdf"
}

### Send Offer Letter
POST {{baseUrl}}/offers/{{offerId}}/send

# ==========================================
# 7. Notifications & Pre-boarding (REC-017, REC-022, REC-029)
# ==========================================

### Send Status Update Notification
POST {{baseUrl}}/notifications/status-update
Content-Type: application/json

{
    "applicationId": "{{applicationId}}",
    "message": "You have advanced to the next round."
}

### Send Rejection Notification
POST {{baseUrl}}/notifications/rejection
Content-Type: application/json

{
    "applicationId": "{{applicationId}}",
    "templateId": "REJECTION_V1"
}

### Get Notification Templates
GET {{baseUrl}}/notifications/templates

### Trigger Pre-boarding (After Acceptance)
POST {{baseUrl}}/applications/{{applicationId}}/trigger-preboarding