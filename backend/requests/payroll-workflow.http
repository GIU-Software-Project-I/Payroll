### Payroll execution workflow (req.http)
# Tailored to controller routes in this codebase.
# Automates: login -> create payroll initiation -> approve initiation (which triggers processing).

@baseUrl = http://localhost:3000

### 1) Login (get JWT)
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "admin@example.com",
  "password": "password"
}

> {% client.global.set('AUTH_JSON', response.body | json) %}

### 2) Extract token (REST Client helper)
# The auth controller exposes `access_token` in the response when NODE_ENV !== production or EXPOSE_JWT_ON_LOGIN=true
@token = {{AUTH_JSON.access_token}}

### 3) (Optional) List signing bonuses
GET {{baseUrl}}/payroll-execution/signing-bonuses?status=pending
Authorization: Bearer {{token}}

### 4) Create payroll initiation
POST {{baseUrl}}/payroll-execution/initiation
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "runId": "PR-{{Date.now()}}",
  "payrollPeriod": "2025-12-01",
  "entity": "default",
  "employees": 0,
  "exceptions": 0,
  "totalnetpay": 0
}

> {% client.global.set('RUN_JSON', response.body | json) %}

### 5) Approve payroll initiation (triggers processing)
# Use the returned initiation id from previous step
POST {{baseUrl}}/payroll-execution/initiation/{{RUN_JSON._id}}/approve
Authorization: Bearer {{token}}

### 6) (Optional) List termination benefits
GET {{baseUrl}}/payroll-execution/termination-benefits?status=pending
Authorization: Bearer {{token}}

### 7) Approve a single signing bonus (example)
# replace :id with a signing-bonus id from step 3
POST {{baseUrl}}/payroll-execution/signing-bonuses/:id/approve
Authorization: Bearer {{token}}

### Notes
- Endpoints use controller prefix `/payroll-execution` as discovered in `PayrollExecutionController`.
- There is no public `GET /employee/active` endpoint in this codebase; payroll execution fetches active employees via internal service `EmployeeProfileService.findActive`.
- I will not execute these requests. Tell me "run curl" if you want me to run the equivalent curl commands here.
